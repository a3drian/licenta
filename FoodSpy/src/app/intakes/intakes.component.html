<p *ngIf="isInDebugMode"><b>intakes</b> works!</p>

<!-- TO DO -->
<!-- Calendar -->

<h2>{{ currentTime | date: 'short' }}</h2>

<div *ngIf="isLoading" class="loading-spinner">
   <app-loading-spinner></app-loading-spinner>
</div>

<h2>Daily intake goal: {{ authenticatedUserTargetCalories }} calories</h2>

<div *ngIf="errorResponse">
   <app-error-response [errorResponse]="errorResponse"></app-error-response>
</div>

<!-- Intake history -->
<div *ngIf="canShowIntakesTable() && !isLoading">
   <table mat-table [dataSource]="intakes">

      <!-- ID -->
      <ng-container matColumnDef="id" *ngIf="isInDebugMode">
         <th mat-header-cell *matHeaderCellDef> ID </th>
         <td mat-cell *matCellDef="let element"> {{ element.id }} </td>
      </ng-container>

      <!-- Email -->
      <ng-container matColumnDef="email" *ngIf="isInDebugMode">
         <th mat-header-cell *matHeaderCellDef> Email </th>
         <td mat-cell *matCellDef="let element"> {{ element.email }} </td>
      </ng-container>

      <!-- Type -->
      <ng-container matColumnDef="type">
         <th mat-header-cell *matHeaderCellDef> Quantity </th>
         <td mat-cell *matCellDef="let element"> {{ element.type }} </td>
      </ng-container>

      <!-- Meals -->
      <ng-container matColumnDef="meals">
         <th mat-header-cell *matHeaderCellDef> Meals </th>
         <td mat-cell *matCellDef="let element"> {{ element.mealIDs.length }} </td>
      </ng-container>

      <!-- CreatedAt -->
      <ng-container matColumnDef="createdAt">
         <th mat-header-cell *matHeaderCellDef> Created at </th>
         <td mat-cell *matCellDef="let element"> {{ element.createdAt | date: 'short' }} </td>
      </ng-container>

      <!-- Details -->
      <ng-container matColumnDef="details">
         <th mat-header-cell *matHeaderCellDef> Details </th>
         <td mat-cell *matCellDef="let element">
            <button class="button" mat-stroked-button color="primary" (click)="viewIntakeDetails(element.id)">
               View
            </button>
         </td>
      </ng-container>

      <!-- Table headers -->
      <ng-container>
         <tr mat-header-row *matHeaderRowDef="intakesColumns"></tr>
         <tr mat-row *matRowDef="let row; columns: intakesColumns;"></tr>
      </ng-container>

   </table>
</div>

<!-- Add new meal -->
<div>
   <button (click)="addNewMeal()">
      Add new meal to daily intake
   </button>
</div>